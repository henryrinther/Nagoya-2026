<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nagoya Trip 2026 - Poster Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; background-color: #0b1527; color: #eee; overflow-x: hidden; }
        
        /* MapToPoster è—è¡“é¢¨æ ¼æ ¸å¿ƒ CSS */
        #map-container { position: relative; height: 50vh; width: 100%; background: #0b1527; overflow: hidden; }
        #map { height: 100%; width: 100%; background: #0b1527; }

        /* æ¿¾é¡ï¼šå°‡åœ°åœ–è½‰ç‚ºã€Œç™½ç·šé»‘åº•ã€ï¼Œå†é€éæ··åˆæ¨¡å¼è½‰ç‚ºé‡‘è‰² */
        .leaflet-tile-container {
            filter: grayscale(1) invert(1) brightness(1.2) contrast(1.1);
            mix-blend-mode: screen; /* è®“ç™½ç·šæµ®åœ¨æµ·è»è—èƒŒæ™¯ä¸Š */
        }

        /* é‡‘è‰²è¦†è“‹å±¤ï¼šè®“ç™½è‰²é“è·¯è®Šç‚ºé‡‘è‰² (#c9a86a) */
        #map::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #c9a86a; mix-blend-mode: multiply; 
            pointer-events: none; z-index: 500;
        }

        /* æµ·å ±é¢¨æ ¼æ¨™é¡Œ */
        .poster-footer {
            position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);
            text-align: center; z-index: 1001; pointer-events: none;
            letter-spacing: 0.3em; text-transform: uppercase;
        }

        /* é‡‘è‰²ç™¼å…‰ Marker */
        .marker-pin {
            width: 12px; height: 12px; background: #c9a86a; border: 2px solid #0b1527;
            border-radius: 50%; box-shadow: 0 0 15px #c9a86a;
        }

        .tab-active { border-bottom: 3px solid #c9a86a; color: #c9a86a; font-weight: bold; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .leaflet-control-attribution { display: none; }
    </style>
</head>
<body class="bg-[#0b1527]">

    <header class="bg-[#0b1527] border-b border-zinc-800 p-6 flex justify-between items-end">
        <div>
            <h1 class="text-2xl font-light tracking-[0.5em] text-[#c9a86a]">NAGOYA</h1>
            <p class="text-[9px] text-zinc-500 uppercase tracking-[0.2em] mt-1">2026 March Edition / Japan</p>
        </div>
        <div class="text-right">
            <span class="text-[10px] text-zinc-400 border border-zinc-700 px-3 py-1 rounded-full">DESIGNER SERIES</span>
        </div>
    </header>

    <div id="map-container">
        <div id="map"></div>
        <div class="poster-footer">
            <div class="text-[#c9a86a] text-lg font-light">åå¤å±‹</div>
            <div class="text-zinc-500 text-[8px] mt-1">35.1815Â° N / 136.9066Â° E</div>
        </div>
    </div>

    <nav class="bg-[#0b1527] border-b border-zinc-800 flex justify-around sticky top-0 z-[1002]">
        <button onclick="switchDay(1)" id="tab1" class="py-4 px-6 text-xs tab-active">D1</button>
        <button onclick="switchDay(2)" id="tab2" class="py-4 px-6 text-xs text-zinc-500">D2</button>
        <button onclick="switchDay(3)" id="tab3" class="py-4 px-6 text-xs text-zinc-500">D3</button>
        <button onclick="switchDay(4)" id="tab4" class="py-4 px-6 text-xs text-zinc-500">D4</button>
    </nav>

    <main id="itinerary" class="p-6 space-y-6"></main>

    <script>
        const itineraryData = {
            1: [
                { time: "14:10", name: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ (NGO)", desc: "åå¤å±‹ä¹‹æ—…èµ·é»", lat: 34.858, lng: 136.805, icon: "ğŸ›¬" },
                { time: "16:30", name: "é…’åº— Check-in", desc: "BASE LAYER åå¤å±‹éŒ¦", lat: 35.1718, lng: 136.9010, icon: "ğŸ¨" },
                { time: "20:00", name: "å‘³ä»™ ä»Šæ± æœ¬åº—", desc: "æ¿€è¾£å°ç£æ‹‰éºµæŒ‘æˆ°", lat: 35.169, lng: 136.937, icon: "ğŸœ" }
            ],
            2: [
                { time: "10:00", name: "æ±å±±å‹•æ¤ç‰©åœ’", desc: "å°‹æ‰¾ Red Panda å°ç†Šè²“", lat: 35.157, lng: 136.979, icon: "ğŸ¼" },
                { time: "16:00", name: "åå¤å±‹åŸ", desc: "é‡‘é¯±åœ°æ¨™æ‰“å¡", lat: 35.184, lng: 136.901, icon: "ğŸ¯" }
            ],
            3: [
                { time: "10:30", name: "å¤§é ˆå•†åº—è¡—", desc: "ä¸­å¤éŠæˆ²èˆ‡å‹•æ¼«è–åœ°", lat: 35.159, lng: 136.903, icon: "ğŸ®" },
                { time: "14:00", name: "å–«èŒ¶ Mountain", desc: "æŠ¹èŒ¶ç´…è±†æ„ç²‰çµ‚æ¥µæŒ‘æˆ°", lat: 35.138, lng: 136.963, icon: "ğŸµ" }
            ],
            4: [
                { time: "10:00", name: "å‰‡æ­¦ä¹‹æ£®", desc: "è”¦å±‹æ›¸åº—ç‰†æ‹ç…§", lat: 35.179, lng: 136.881, icon: "ğŸ“š" },
                { time: "15:00", name: "å‰å¾€æ©Ÿå ´", desc: "æ­ Î¼-Sky çµæŸæ—…ç¨‹", icon: "ğŸ›«" }
            ]
        };

        let map = L.map('map', { zoomControl: false, scrollWheelZoom: false }).setView([35.17, 136.90], 13);
        
        // ä½¿ç”¨ CartoDB ç„¡æ¨™ç±¤ç‰ˆåº•åœ–ï¼Œæ–¹ä¾¿é€é CSS æŸ“è‰²
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png', {
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        let markers = [];

        function switchDay(day) {
            document.querySelectorAll('nav button').forEach(b => {
                b.classList.remove('tab-active');
                b.classList.add('text-zinc-500');
            });
            document.getElementById('tab' + day).classList.add('tab-active');
            document.getElementById('tab' + day).classList.remove('text-zinc-500');

            const container = document.getElementById('itinerary');
            container.innerHTML = '';
            markers.forEach(m => map.removeLayer(m));
            markers = [];
            const dayPoints = [];

            itineraryData[day].forEach(item => {
                container.innerHTML += `
                    <div class="flex gap-6 border-l border-zinc-800 ml-2 pl-6 pb-6 relative">
                        <div class="absolute -left-[6.5px] top-0 w-3 h-3 bg-[#c9a86a] rounded-full shadow-[0_0_10px_#c9a86a]"></div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-baseline">
                                <h3 class="font-bold text-sm text-zinc-100 tracking-wider">${item.name}</h3>
                                <span class="text-[9px] font-mono text-zinc-500">${item.time}</span>
                            </div>
                            <p class="text-zinc-500 text-[11px] mt-2 font-light">${item.desc}</p>
                        </div>
                    </div>`;

                if (item.lat) {
                    const customIcon = L.divIcon({
                        html: `<div class="marker-pin"></div>`,
                        className: 'custom-div-icon',
                        iconSize: [12, 12],
                        iconAnchor: [6, 6]
                    });
                    const m = L.marker([item.lat, item.lng], { icon: customIcon }).addTo(map);
                    markers.push(m);
                    dayPoints.push([item.lat, item.lng]);
                }
            });
            if(dayPoints.length > 0) map.fitBounds(dayPoints, { padding: [80, 80] });
        }
        switchDay(1);
    </script>
</body>
</html>
