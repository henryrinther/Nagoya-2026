<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nagoya 2026 - Cyan Mobile Ready</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; background-color: #09090b; color: #eee; scroll-behavior: smooth; }
        
        #map-container { position: relative; height: 40vh; width: 100%; background: #09090b; }
        #map { height: 100%; width: 100%; background: #09090b; touch-action: pan-x pan-y; }

        /* æ‰‹æ©Ÿå„ªåŒ–ç‰ˆï¼šé›»å…‰é’æ¿¾é¡ (æ¸›å°‘é‹ç®—é‡) */
        .leaflet-tile-container {
            filter: brightness(0.8) contrast(1.2) grayscale(1) invert(1) sepia(1) saturate(10) hue-rotate(150deg);
            transform: translate3d(0,0,0); /* å¼·åˆ¶ç¡¬ä»¶åŠ é€Ÿ */
        }

        /* Marker æ¨£å¼ï¼šé’è‰²ç™¼å…‰ */
        .marker-pin {
            width: 42px; height: 42px;
            background: rgba(9, 9, 11, 0.9);
            border: 2px solid #00f2ff;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.6);
        }

        /* æ¸…å–®é«˜äº®æ•ˆæœ */
        .highlight-card {
            border: 1px solid #00f2ff !important;
            background: rgba(0, 242, 255, 0.1) !important;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
            transform: scale(1.02);
        }

        .tab-active { border-bottom: 3px solid #00f2ff; color: #00f2ff; font-weight: bold; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .leaflet-control-attribution { display: none; }
    </style>
</head>
<body class="bg-black">

    <header class="bg-zinc-950 p-5 flex justify-between items-center border-b border-zinc-900 sticky top-0 z-[2000] backdrop-blur-lg">
        <div>
            <h1 class="text-lg font-light tracking-[0.3em] text-[#00f2ff]">N A G O Y A</h1>
            <p class="text-[8px] text-zinc-500 uppercase tracking-widest mt-1">2026 March / M3 Max Powered</p>
        </div>
        <div class="text-right flex flex-col items-end">
            <span class="text-[9px] text-[#00f2ff] border border-[#00f2ff]/30 px-2 py-0.5 rounded uppercase font-bold tracking-tighter">Cyan v3.5 Stable</span>
        </div>
    </header>

    <div id="map-container">
        <div id="map"></div>
    </div>

    <nav class="bg-zinc-950 border-b border-zinc-900 flex justify-around sticky top-[68px] z-[2000]">
        <button onclick="switchDay(1)" id="tab1" class="py-4 px-6 text-[10px] tracking-widest tab-active">D1</button>
        <button onclick="switchDay(2)" id="tab2" class="py-4 px-6 text-[10px] tracking-widest text-zinc-600">D2</button>
        <button onclick="switchDay(3)" id="tab3" class="py-4 px-6 text-[10px] tracking-widest text-zinc-600">D3</button>
        <button onclick="switchDay(4)" id="tab4" class="py-4 px-6 text-[10px] tracking-widest text-zinc-600">D4</button>
    </nav>

    <main id="itinerary" class="p-5 space-y-4 pb-20"></main>

    <script>
        const itineraryData = {
            1: [
                { id: "loc-1-1", time: "14:10", name: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ (NGO)", desc: "è½æ©Ÿå…¥å¢ƒåŠæå–è¡Œæ", hours: "24 Hours", lat: 34.858, lng: 136.805, icon: "ğŸ›¬" },
                { id: "loc-1-2", time: "16:30", name: "é…’åº— Check-in", desc: "BASE LAYER åå¤å±‹éŒ¦", hours: "Check-in 15:00+", lat: 35.1718, lng: 136.9010, icon: "ğŸ¨" },
                { id: "loc-1-3", time: "20:00", name: "å‘³ä»™ ä»Šæ± æœ¬åº—", desc: "æŒ‘æˆ°å…ƒç¥–å°ç£æ‹‰éºµ", hours: "17:30 â€“ 02:00", lat: 35.169, lng: 136.937, icon: "ğŸœ" }
            ],
            2: [
                { id: "loc-2-1", time: "10:00", name: "æ±å±±å‹•æ¤ç‰©åœ’", desc: "è§€è³ç´…ç†Šè²“", hours: "09:00 â€“ 16:30", lat: 35.157, lng: 136.979, icon: "ğŸ¼" },
                { id: "loc-2-2", time: "16:00", name: "åå¤å±‹åŸ", desc: "é‡‘é¯±åœ°æ¨™æ‰“å¡", hours: "09:00 â€“ 16:30", lat: 35.184, lng: 136.901, icon: "ğŸ¯" }
            ],
            3: [
                { id: "loc-3-1", time: "10:30", name: "å¤§é ˆå•†åº—è¡—", desc: "é›»ç©åŠä¸­å¤ç©å…·è–åœ°", hours: "10:00 â€“ 20:00", lat: 35.159, lng: 136.903, icon: "ğŸ®" },
                { id: "loc-3-2", time: "14:00", name: "å–«èŒ¶ Mountain", desc: "æŠ¹èŒ¶ç´…è±†æ„ç²‰ä»»å‹™", hours: "09:00 â€“ 21:30", lat: 35.138, lng: 136.963, icon: "ğŸµ" }
            ],
            4: [
                { id: "loc-4-1", time: "10:00", name: "å‰‡æ­¦ä¹‹æ£®", desc: "ç¶²ç´…æ›¸åº—ç‰†æ‹ç…§", hours: "10:00 â€“ 18:00", lat: 35.179, lng: 136.881, icon: "ğŸ“š" },
                { id: "loc-4-2", time: "15:00", name: "å‰å¾€æ©Ÿå ´", desc: "æ­ä¹˜ Î¼-Sky è¿”å›", hours: "N/A", icon: "ğŸ›«" }
            ]
        };

        let map = L.map('map', { zoomControl: false, scrollWheelZoom: false }).setView([35.17, 136.90], 13);
        
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}{r}.png', {
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        let markers = [];

        function switchDay(day) {
            document.querySelectorAll('nav button').forEach(b => {
                b.classList.remove('tab-active');
                b.classList.add('text-zinc-600');
            });
            document.getElementById('tab' + day).classList.add('tab-active');
            document.getElementById('tab' + day).classList.remove('text-zinc-600');

            const container = document.getElementById('itinerary');
            container.innerHTML = '';
            markers.forEach(m => map.removeLayer(m));
            markers = [];
            const dayPoints = [];

            itineraryData[day].forEach(item => {
                container.innerHTML += `
                    <div id="${item.id}" class="transition-all duration-300 bg-zinc-900/40 border border-zinc-800 p-5 rounded-2xl flex gap-5 shadow-lg active:scale-95">
                        <div class="text-2xl">${item.icon}</div>
                        <div class="flex-grow">
                            <div class="flex justify-between items-start">
                                <h3 class="font-bold text-xs text-zinc-100 uppercase tracking-widest">${item.name}</h3>
                                <span class="text-[9px] font-mono text-[#00f2ff] font-bold tracking-tighter">${item.time}</span>
                            </div>
                            <p class="text-zinc-500 text-[10px] mt-2 font-light leading-relaxed">${item.desc}</p>
                            <div class="mt-3 flex items-center gap-2">
                                <span class="text-[8px] bg-black/40 px-2 py-0.5 rounded border border-zinc-800 text-zinc-500 font-mono">ğŸ•™ ${item.hours}</span>
                            </div>
                        </div>
                    </div>`;

                if (item.lat) {
                    const customIcon = L.divIcon({
                        html: `<div class="marker-pin" onclick="highlightItem('${item.id}')">${item.icon}</div>`,
                        className: 'custom-div-icon',
                        iconSize: [42, 42],
                        iconAnchor: [21, 21]
                    });
                    const m = L.marker([item.lat, item.lng], { icon: customIcon }).addTo(map);
                    markers.push(m);
                    dayPoints.push([item.lat, item.lng]);
                }
            });
            if(dayPoints.length > 0) map.fitBounds(dayPoints, { padding: [50, 50] });
        }

        // äº’å‹•åŠŸèƒ½ï¼šé»æ“Šåœ°åœ– Emojiï¼Œæ¸…å–®æ²å‹•ä¸¦é«˜äº®
        function highlightItem(id) {
            const el = document.getElementById(id);
            if (el) {
                // æ¸…é™¤å…¶ä»–é«˜äº®
                document.querySelectorAll('#itinerary > div').forEach(d => d.classList.remove('highlight-card'));
                
                // å¹³æ»‘æ²å‹•
                const headerOffset = 150;
                const elementPosition = el.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: "smooth"
                });

                // åŠ å…¥é«˜äº® CSS
                el.classList.add('highlight-card');
                
                // 2ç§’å¾Œè‡ªå‹•æ¶ˆå¤±
                setTimeout(() => el.classList.remove('highlight-card'), 2000);
            }
        }

        switchDay(1);
    </script>
</body>
</html>
